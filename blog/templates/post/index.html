{% extends "base.html" %}

{% block content %}
    <div class="add-post make-magic" title="add post">+</div>
    <div class="add-post-form block">
        <form class="form" role="form" method="post" action="{% url 'add_post' %}">
            {% csrf_token %}
            <div class="form-group">
                {{ form.title.errors }}
                {{ form.title.label_tag }}
                {{ form.title }}
            </div>
            <div class="form-group">
                {{ form.text.errors }}
                {{ form.text.label_tag }}
                {{ form.text }}
            </div>
            <button type="submit" class="btn btn-primary">Add post</button>
        </form>
    </div>
    {% if posts %}
        {% for post in posts %}
            <div class="post block make-magic">
                <div class="post-title">
                    <h3>{{post.title}}</h3>
                    <small>{{post.author}} at {{post.created_at}}</small>
                </div>
                <div class="post-content">
                    {{post.text|linebreaks|truncatewords:20}}
                </div>
                <div class="post-view-more text-right">
                    <a href="{% url 'view' post.id %}">view more</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="block">
            <p>Posts not found :(</p>
        </div>
    {% endif %}
{% endblock %}